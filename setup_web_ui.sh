#!/usr/bin/env bash
###############################################################################
# run_rdk_install.sh
# Â· /home/*/rainbow-deploy-kit ë””ë ‰í„°ë¦¬ë¥¼ ì°¾ì•„ S100 ì˜µì…˜ìœ¼ë¡œ install.sh ì‹¤í–‰
###############################################################################
set -Eeuo pipefail

# â”€â”€â”€ 1) ê¸°ë³¸ ê²½ë¡œ: í˜„ìž¬ ì‚¬ìš©ìž í™ˆ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
DEPLOY_DIR="$HOME/rainbow-deploy-kit"

# â”€â”€â”€ 2) ì—†ìœ¼ë©´ /home í•˜ìœ„(ìµœëŒ€ 2ë‹¨ê³„)ì—ì„œ ê²€ìƒ‰ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
if [[ ! -d "$DEPLOY_DIR" ]]; then
  DEPLOY_DIR=$(find /home -maxdepth 2 -type d -name rainbow-deploy-kit 2>/dev/null | head -n 1 || true)
fi

# â”€â”€â”€ 3) ìµœì¢… í™•ì¸ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
if [[ -z "$DEPLOY_DIR" || ! -d "$DEPLOY_DIR" ]]; then
  echo "âŒ /home ê²½ë¡œì—ì„œ rainbow-deploy-kit ë””ë ‰í„°ë¦¬ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤." >&2
  exit 1
fi

echo "ðŸ“‚ cd $DEPLOY_DIR"
cd "$DEPLOY_DIR"

echo "ðŸš€ sudo bash install.sh --fo=/S100 S100"
sudo bash install.sh --fo=/S100 S100

